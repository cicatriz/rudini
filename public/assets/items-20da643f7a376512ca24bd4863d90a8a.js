((function(){var a,b,c,d,e;e=function(a){return $(".quiz").hide(),$(".quiz:nth("+a+")").show(),$("#item-content").hide(),$(".revealed").removeClass("revealed"),$("#nth-quiz").text(a+1),MathJax.Hub.Queue(["Typeset",MathJax.Hub,"quiz-container"]),$("#quiz-show-btn").removeClass("disabled"),a===0?$("#quiz-back-btn").addClass("disabled"):$("#quiz-back-btn").removeClass("disabled"),a===parseInt($("#tot-quiz").text())-1?$("#quiz-next-btn").addClass("disabled"):$("#quiz-next-btn").removeClass("disabled")},a=function(){return e(0),$("#quiz-back-btn").click(function(){if($(this).hasClass("disabled"))return;return e(parseInt($("#nth-quiz").text())-2)}),$("#quiz-next-btn").click(function(){if($(this).hasClass("disabled"))return;return e(parseInt($("#nth-quiz").text()))}),$("#quiz-show-btn").click(function(){if($(this).hasClass("disabled"))return;return $("#item-content").show(),$(this).addClass("disabled"),$(".blank").addClass("revealed")}),$(".quiz-btn .btn").click(function(){return $(this).parent().submit(),!1}),b()},document.loadVideo=function(a,b,c){return $(".video-container").hasClass("hidden")&&$(".video-container").removeClass("hidden"),$("#video").html(""),clearInterval(document.end_vid),console.log(a+", "+b+", "+c),document.vid=Popcorn.youtube("#video","http://www.youtube.com/watch?v="+a),document.vid.play(b),document.end_vid=setInterval(function(){if(document.vid.roundTime()>c)return document.vid.pause(),clearInterval(document.end_vid)},1e3)},document.showItem=function(a){var b,c;return $(".item-container > .item").hide(),$(".quiz-container").hide(),b=$("#item-"+a),b.show(),c="Item "+a+" - "+b.attr("data-title"),document.title=c,History.pushState({item:a},c,"?item="+a),$("#new_quiz").submit(function(){return $(this).unbind("submit").submit()})},d=function(a){return $("#nav-item-"+a).show()},document.showQuiz=function(){var b;return $(".item-container > .item").hide(),$(".quiz-container").show(),$.get("/spaceable_memories",function(b){return $(".quiz-container").html(b),a()}),b="LSRu - Quiz",document.title=b,History.pushState({quiz:1},b,"?quiz=1")},c=function(){var a,b;if(window.location.pathname!=="/")return;return $(".item-container > .item").hide(),$(".quiz-container").hide(),a=$.getParameterByName("item"),b=$.getParameterByName("quiz"),a&&a.match(/\d+/)?document.showItem(a):b?document.showQuiz():document.showItem("none")},b=function(){return $(".play-btn").click(function(){var a;return a=$(this),document.loadVideo(a.data("videoid"),a.data("start"),a.data("end")),!1})},$(function(){var a;return c(),a=!1,window.onpopstate=function(b){if(!!a)return c();a=!0},b(),$("#search-box").keyup(function(){var a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F;h=$("#search-box").val();if(h==="")return $(".nav-list > li").show(),!1;e=/^(rudin|chapter|lecture|section):(.*)/,u=h.match(e)||[null,null,null],a=u[0],c=u[1],g=u[2];if(!g){$(".nav-list > li").hide(),A=$('.item:icontains("'+h+'")'),F=[];for(t=0,r=A.length;t<r;t++)b=A[t],F.push(d($(b).attr("data-id")));return F}$(".nav-list > li").hide();switch(c){case"rudin":v=$("div[data-rudineq='"+g+"']"),B=[];for(i=0,m=v.length;i<m;i++)b=v[i],B.push(d($(b).attr("data-id")));return B;case"chapter":w=$("div[data-rudinch='"+g+"']"),C=[];for(j=0,n=w.length;j<n;j++)b=w[j],C.push(d($(b).attr("data-id")));return C;case"lecture":f=new RegExp(g,"i"),x=$("div[data-lectureid='"+g+"']");for(k=0,o=x.length;k<o;k++)b=x[k],d($(b).attr("data-id"));y=$("div[data-lecturename]").filter(function(){return $(this).attr("data-lecturename").match(f)}),D=[];for(l=0,p=y.length;l<p;l++)b=y[l],D.push(d($(b).attr("data-id")));return D;case"section":f=new RegExp(g,"i"),z=$("div[data-rudinsec]").filter(function(){return $(this).attr("data-rudinsec").match(f)}),E=[];for(s=0,q=z.length;s<q;s++)b=z[s],E.push(d($(b).attr("data-id")));return E}}),$(".nav-list a").click(function(){var a,b,c;return b=$(this),a=b.attr("id").split("-"),c=a[a.length-1],document.showItem(c),!1}),$(".study-initiate").click(function(){return document.showQuiz(),!1}),$(".study-submit").click(function(){var a;return a=$(this).data("itemid"),$("#item-study-info-"+a+" form").submit(),!1})})})).call(this)